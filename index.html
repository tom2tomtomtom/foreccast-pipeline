<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Q2 FY26 Revenue Waterfall</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        * { box-sizing: border-box; }
        body { margin: 0; padding: 0; }
        .card { background: white; border-radius: 0.5rem; box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1); }
        .card-header { padding: 1rem; border-bottom: 1px solid #e5e7eb; }
        .card-content { padding: 1rem; }
        .btn { padding: 0.5rem 0.75rem; border-radius: 0.5rem; font-weight: 500; transition: all 0.2s; cursor: pointer; border: none; font-size: 0.875rem; }
        .btn-active { background: #2563eb; color: white; }
        .btn-inactive { background: white; color: #374151; }
        .btn-inactive:hover { background: #f3f4f6; }
        #login-screen { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); display: flex; align-items: center; justify-content: center; z-index: 9999; padding: 1rem; }
        #dashboard { display: none; }
        
        /* Mobile optimizations */
        @media (max-width: 768px) {
            .card-header { padding: 0.75rem; }
            .card-content { padding: 0.75rem; }
            .btn { padding: 0.4rem 0.6rem; font-size: 0.75rem; }
            h1 { font-size: 1.5rem !important; }
            h2 { font-size: 1.125rem !important; }
            .text-2xl { font-size: 1.25rem !important; }
            table { font-size: 0.75rem; }
            th, td { padding: 0.5rem !important; }
        }
        
        /* Scrollable tables on mobile */
        .table-container { overflow-x: auto; -webkit-overflow-scrolling: touch; }
        
        /* Responsive grid */
        @media (max-width: 640px) {
            .summary-grid { grid-template-columns: repeat(2, 1fr) !important; gap: 0.5rem !important; }
            .btn-group { flex-wrap: wrap; }
        }
    </style>
</head>
<body class="bg-gray-50">
    <div id="login-screen">
        <div class="bg-white p-6 rounded-lg shadow-2xl w-full max-w-md">
            <h2 class="text-xl font-bold text-gray-900 mb-4 text-center">Revenue Dashboard Login</h2>
            <input type="password" id="password-input" placeholder="Enter password" class="w-full px-4 py-3 border border-gray-300 rounded-lg mb-4 focus:outline-none focus:ring-2 focus:ring-blue-500" onkeypress="if(event.key==='Enter') checkPassword()">
            <button onclick="checkPassword()" class="w-full bg-blue-600 text-white py-3 rounded-lg font-semibold hover:bg-blue-700 transition">Access Dashboard</button>
            <p id="error-msg" class="text-red-600 text-sm mt-2 text-center" style="display:none;">Incorrect password</p>
        </div>
    </div>
    
    <div id="dashboard">
        <div class="w-full max-w-7xl mx-auto p-3 sm:p-6">
            <div class="mb-6">
                <h1 class="text-2xl sm:text-3xl font-bold text-gray-900 mb-2">Q2 FY26 Revenue Waterfall</h1>
                <p class="text-sm sm:text-base text-gray-600">Weekly Update: December 7, 2025</p>
            </div>

            <div class="mb-4 flex gap-2 btn-group flex-wrap">
                <button class="btn btn-active" id="btn-group" onclick="selectOffice('group')">üåê Group</button>
                <button class="btn btn-inactive" id="btn-melbourne" onclick="selectOffice('melbourne')">Melbourne</button>
                <button class="btn btn-inactive" id="btn-brisbane" onclick="selectOffice('brisbane')">Brisbane</button>
                <button class="btn btn-inactive" id="btn-sydney" onclick="selectOffice('sydney')">Sydney</button>
            </div>

            <div class="mb-6 flex gap-2 btn-group flex-wrap">
                <button class="btn btn-active" id="btn-oct" onclick="selectMonth('oct')" style="background: #7c3aed; color: white;">October</button>
                <button class="btn btn-inactive" id="btn-nov" onclick="selectMonth('nov')">November</button>
                <button class="btn btn-inactive" id="btn-dec" onclick="selectMonth('dec')">December</button>
                <button class="btn btn-inactive" id="btn-q2" onclick="selectMonth('q2')">Q2 Total</button>
            </div>

            <div class="grid grid-cols-2 md:grid-cols-4 gap-3 sm:gap-4 mb-6 summary-grid" id="summaryCards"></div>

            <div class="card mb-6">
                <div class="card-header text-white" style="background: linear-gradient(to right, #2563eb, #7c3aed);">
                    <h2 class="text-lg sm:text-xl font-bold" id="chartTitle">October - Group Total</h2>
                    <p class="text-blue-100 text-xs sm:text-sm mt-1">Confirmed + Unconfirmed + Gap = Target</p>
                </div>
                <div class="card-content">
                    <div id="waterfallChart" style="height: 350px; width: 100%; overflow-x: auto;"></div>
                    <div class="mt-4 bg-blue-50 p-3 rounded-lg">
                        <h3 class="font-bold text-blue-900 mb-2 text-sm sm:text-base">Waterfall Breakdown:</h3>
                        <div class="grid grid-cols-1 sm:grid-cols-2 gap-3 text-xs sm:text-sm" id="waterfallBreakdown"></div>
                    </div>
                </div>
            </div>

            <div class="card mb-6" id="teamBreakdown" style="display: none;">
                <div class="card-header text-white" style="background: linear-gradient(to right, #4f46e5, #7c3aed);">
                    <h2 class="text-lg sm:text-xl font-bold" id="teamBreakdownTitle">Melbourne Team Breakdown</h2>
                </div>
                <div class="card-content">
                    <div class="table-container">
                        <table class="w-full" id="teamTable"></table>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-header text-white" style="background: linear-gradient(to right, #059669, #0d9488);">
                    <h2 class="text-lg sm:text-xl font-bold" id="comparisonTitle">Office Breakdown</h2>
                </div>
                <div class="card-content">
                    <div class="table-container">
                        <table class="w-full" id="comparisonTable"></table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
const PASSWORD = 'altshift2025';

function checkPassword() {
    const input = document.getElementById('password-input').value;
    if (input === PASSWORD) {
        document.getElementById('login-screen').style.display = 'none';
        document.getElementById('dashboard').style.display = 'block';
        sessionStorage.setItem('authenticated', 'true');
    } else {
        document.getElementById('error-msg').style.display = 'block';
        document.getElementById('password-input').value = '';
    }
}

if (sessionStorage.getItem('authenticated') === 'true') {
    document.getElementById('login-screen').style.display = 'none';
    document.getElementById('dashboard').style.display = 'block';
}

document.getElementById('password-input')?.focus();

const data = {"melbourne":{"oct":{"month":"Oct","target":405000,"confirmed":370903.9633333333,"unconfirmed":0,"gap":34096.03666666668,"teams":{"dt":{"confirmed":147547.5833333333,"unconfirmed":0,"target":155000},"gg":{"confirmed":138055.38,"unconfirmed":0,"target":140000},"sc":{"confirmed":85301,"unconfirmed":0,"target":110000}}},"nov":{"month":"Nov","target":400000,"confirmed":354259.07333333336,"unconfirmed":800,"gap":44940.92666666664,"teams":{"dt":{"confirmed":147448.25,"unconfirmed":800,"target":150000},"gg":{"confirmed":135643.49,"unconfirmed":0,"target":120000},"sc":{"confirmed":71167.33333333334,"unconfirmed":0,"target":130000}}},"dec":{"month":"Dec","target":325000,"confirmed":270477.97,"unconfirmed":17200,"gap":37322.03000000003,"teams":{"dt":{"confirmed":118864,"unconfirmed":10800,"target":140000},"gg":{"confirmed":53774.97,"unconfirmed":6400,"target":60000},"sc":{"confirmed":97839,"unconfirmed":0,"target":125000}}},"q2":{"month":"Q2 Total","target":1130000,"confirmed":995641.0066666666,"unconfirmed":18000,"gap":116358.9933333334,"teams":{"dt":{"confirmed":413859.8333333333,"unconfirmed":11600,"target":445000},"gg":{"confirmed":327473.83999999997,"unconfirmed":6400,"target":320000},"sc":{"confirmed":254307.33333333334,"unconfirmed":0,"target":365000}}}},"brisbane":{"oct":{"month":"Oct","target":115000,"confirmed":113905.64,"unconfirmed":0,"gap":1094.3600000000006},"nov":{"month":"Nov","target":100000,"confirmed":100742.64,"unconfirmed":0,"gap":-742.6399999999994},"dec":{"month":"Dec","target":75000,"confirmed":72768.64000000001,"unconfirmed":0,"gap":2231.359999999986},"q2":{"month":"Q2 Total","target":290000,"confirmed":287416.92000000004,"unconfirmed":0,"gap":2583.079999999958}},"sydney":{"oct":{"month":"Oct","target":36000,"confirmed":31277.18,"unconfirmed":0,"gap":4722.82},"nov":{"month":"Nov","target":51000,"confirmed":38500,"unconfirmed":0,"gap":12500},"dec":{"month":"Dec","target":40000,"confirmed":30150,"unconfirmed":0,"gap":9850},"q2":{"month":"Q2 Total","target":127000,"confirmed":99927.18,"unconfirmed":0,"gap":27072.820000000007}},"group":{"oct":{"month":"Oct","target":556000,"confirmed":516086.7833333333,"unconfirmed":0,"gap":39913.216666666674},"nov":{"month":"Nov","target":551000,"confirmed":493501.7133333334,"unconfirmed":800,"gap":56698.28666666662},"dec":{"month":"Dec","target":440000,"confirmed":373396.61,"unconfirmed":17200,"gap":49403.390000000014},"q2":{"month":"Q2 Total","target":1547000,"confirmed":1382985.1066666667,"unconfirmed":18000,"gap":146014.8933333333}}};
let currentOffice = 'group';
let currentMonth = 'oct';

function formatCurrency(value) { return '$' + (value / 1000).toFixed(0) + 'k'; }

function selectOffice(office) {
    currentOffice = office;
    document.querySelectorAll('[id^="btn-"]').forEach(btn => {
        if (btn.id.includes('oct') || btn.id.includes('nov') || btn.id.includes('dec') || btn.id.includes('q2')) return;
        btn.className = 'btn btn-inactive';
    });
    document.getElementById('btn-' + office).className = 'btn btn-active';
    updateDisplay();
}

function selectMonth(month) {
    currentMonth = month;
    document.querySelectorAll('[id^="btn-"][id*="oct"], [id^="btn-"][id*="nov"], [id^="btn-"][id*="dec"], [id^="btn-"][id*="q2"]').forEach(btn => {
        btn.className = 'btn btn-inactive'; btn.style.background = ''; btn.style.color = '';
    });
    const btn = document.getElementById('btn-' + month);
    btn.className = 'btn btn-active'; btn.style.background = '#7c3aed'; btn.style.color = 'white';
    updateDisplay();
}

function drawWaterfall(d) {
    const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
    const isMobile = window.innerWidth < 640;
    const viewBoxWidth = isMobile ? 600 : 800;
    svg.setAttribute('viewBox', '0 0 ' + viewBoxWidth + ' 400');
    svg.setAttribute('preserveAspectRatio', 'xMidYMid meet');
    svg.style.width = '100%';
    svg.style.height = 'auto';
    
    const h = 300, w = isMobile ? 60 : 100, g = isMobile ? 30 : 50, max = d.target;
    const getY = v => 40 + h - (v/max*h), getH = v => v/max*h;
    const cy = getY(d.confirmed), ch = getH(d.confirmed);
    const uy = getY(d.confirmed + d.unconfirmed), uh = getH(d.unconfirmed);
    const gy = getY(d.target), gh = getH(d.gap);
    const x1=40, x2=x1+w+g, x3=x2+w+g, x4=x3+w+g;
    const fontSize = isMobile ? 10 : 14;
    const labelFontSize = isMobile ? 9 : 13;
    
    svg.innerHTML = '<line x1="30" y1="40" x2="' + (viewBoxWidth-30) + '" y2="40" stroke="#e5e7eb" stroke-width="1"/><line x1="30" y1="' + (h+40) + '" x2="' + (viewBoxWidth-30) + '" y2="' + (h+40) + '" stroke="#e5e7eb" stroke-width="2"/><line x1="30" y1="40" x2="' + (viewBoxWidth-30) + '" y2="40" stroke="#ef4444" stroke-width="2" stroke-dasharray="5,5"/><text x="' + (viewBoxWidth-25) + '" y="45" font-size="' + (fontSize-2) + '" fill="#ef4444" font-weight="bold" text-anchor="end">Target: ' + formatCurrency(d.target) + '</text><rect x="' + x1 + '" y="' + cy + '" width="' + w + '" height="' + ch + '" fill="#10b981" stroke="#059669" stroke-width="2"/><text x="' + (x1+w/2) + '" y="' + (cy-5) + '" font-size="' + fontSize + '" font-weight="bold" fill="#059669" text-anchor="middle">' + formatCurrency(d.confirmed) + '</text><text x="' + (x1+w/2) + '" y="' + (h+60) + '" font-size="' + labelFontSize + '" font-weight="bold" text-anchor="middle">Confirmed</text><line x1="' + (x1+w) + '" y1="' + cy + '" x2="' + x2 + '" y2="' + cy + '" stroke="#94a3b8" stroke-width="2" stroke-dasharray="3,3"/>' + (d.unconfirmed>0?'<rect x="' + x2 + '" y="' + uy + '" width="' + w + '" height="' + uh + '" fill="#fbbf24" stroke="#f59e0b" stroke-width="2"/><text x="' + (x2+w/2) + '" y="' + (uy-5) + '" font-size="' + fontSize + '" font-weight="bold" fill="#f59e0b" text-anchor="middle">' + formatCurrency(d.unconfirmed) + '</text>':'') + '<rect x="' + x2 + '" y="' + cy + '" width="' + w + '" height="' + ch + '" fill="#10b981" opacity="0.3"/><text x="' + (x2+w/2) + '" y="' + (h+60) + '" font-size="' + labelFontSize + '" font-weight="bold" text-anchor="middle">+ Unconf.</text><line x1="' + (x2+w) + '" y1="' + (d.unconfirmed>0?uy:cy) + '" x2="' + x3 + '" y2="' + (d.unconfirmed>0?uy:cy) + '" stroke="#94a3b8" stroke-width="2" stroke-dasharray="3,3"/><rect x="' + x3 + '" y="' + gy + '" width="' + w + '" height="' + gh + '" fill="#fee2e2" stroke="#ef4444" stroke-width="2" stroke-dasharray="4,4"/><text x="' + (x3+w/2) + '" y="' + (gy+gh/2) + '" font-size="' + fontSize + '" font-weight="bold" fill="#ef4444" text-anchor="middle">' + formatCurrency(d.gap) + '</text><rect x="' + x3 + '" y="' + cy + '" width="' + w + '" height="' + (ch+uh) + '" fill="#10b981" opacity="0.2"/><text x="' + (x3+w/2) + '" y="' + (h+60) + '" font-size="' + labelFontSize + '" font-weight="bold" text-anchor="middle">Gap</text><line x1="' + (x3+w) + '" y1="40" x2="' + x4 + '" y2="40" stroke="#94a3b8" stroke-width="2" stroke-dasharray="3,3"/><rect x="' + x4 + '" y="40" width="' + w + '" height="' + h + '" fill="none" stroke="#ef4444" stroke-width="3"/><text x="' + (x4+w/2) + '" y="' + (h/2+40) + '" font-size="' + fontSize + '" font-weight="bold" fill="#ef4444" text-anchor="middle">' + formatCurrency(d.target) + '</text><text x="' + (x4+w/2) + '" y="' + (h+60) + '" font-size="' + labelFontSize + '" font-weight="bold" text-anchor="middle">Target</text>';
    return svg;
}

function updateDisplay() {
    const d = data[currentOffice][currentMonth];
    if (!d) {
        console.error('No data for', currentOffice, currentMonth);
        return;
    }
    const oName = currentOffice === 'group' ? 'Group Total' : currentOffice.charAt(0).toUpperCase() + currentOffice.slice(1);
    document.getElementById('chartTitle').textContent = d.month + ' - ' + oName;
    document.getElementById('summaryCards').innerHTML = '<div class="card"><div class="card-content pt-4"><div class="text-xs text-gray-600 mb-1">Target</div><div class="text-lg sm:text-2xl font-bold text-gray-900">' + formatCurrency(d.target) + '</div></div></div><div class="card"><div class="card-content pt-4"><div class="text-xs text-gray-600 mb-1">Confirmed</div><div class="text-lg sm:text-2xl font-bold text-green-600">' + formatCurrency(d.confirmed) + '</div><div class="text-xs text-gray-500 mt-1">' + ((d.confirmed/d.target)*100).toFixed(1) + '%</div></div></div><div class="card"><div class="card-content pt-4"><div class="text-xs text-gray-600 mb-1">Unconfirmed</div><div class="text-lg sm:text-2xl font-bold text-yellow-600">' + formatCurrency(d.unconfirmed) + '</div><div class="text-xs text-gray-500 mt-1">' + ((d.unconfirmed/d.target)*100).toFixed(1) + '%</div></div></div><div class="card"><div class="card-content pt-4"><div class="text-xs text-gray-600 mb-1">Gap</div><div class="text-lg sm:text-2xl font-bold text-red-600">' + formatCurrency(d.gap) + '</div><div class="text-xs text-gray-500 mt-1">' + ((d.gap/d.target)*100).toFixed(1) + '%</div></div></div>';
    document.getElementById('waterfallChart').innerHTML = '';
    document.getElementById('waterfallChart').appendChild(drawWaterfall(d));
    document.getElementById('waterfallBreakdown').innerHTML = '<div><div class="text-gray-700">Confirmed:</div><div class="font-bold text-green-700">' + formatCurrency(d.confirmed) + ' (' + ((d.confirmed/d.target)*100).toFixed(1) + '%)</div></div><div><div class="text-gray-700">Unconfirmed:</div><div class="font-bold text-yellow-700">' + formatCurrency(d.unconfirmed) + ' (' + ((d.unconfirmed/d.target)*100).toFixed(1) + '%)</div></div><div><div class="text-gray-700">Total Pipeline:</div><div class="font-bold text-blue-700">' + formatCurrency(d.confirmed+d.unconfirmed) + ' (' + (((d.confirmed+d.unconfirmed)/d.target)*100).toFixed(1) + '%)</div></div><div><div class="text-gray-700">Gap:</div><div class="font-bold text-red-700">' + formatCurrency(d.gap) + ' (' + ((d.gap/d.target)*100).toFixed(1) + '%)</div></div>';
    
    if(currentOffice==='melbourne'&&d.teams){
        document.getElementById('teamBreakdown').style.display='block';
        document.getElementById('teamBreakdownTitle').textContent='Melbourne Team - ' + d.month;
        const teams=[{name:'Dream Team',key:'dt'},{name:'Go-Getters',key:'gg'},{name:'Social & Content',key:'sc'}];
        let html='<thead class="bg-gray-100"><tr><th class="px-2 py-2 text-left text-xs sm:text-sm">Team</th><th class="px-2 py-2 text-right text-xs sm:text-sm">Target</th><th class="px-2 py-2 text-right text-xs sm:text-sm">Confirmed</th><th class="px-2 py-2 text-right text-xs sm:text-sm">Unconf.</th><th class="px-2 py-2 text-right text-xs sm:text-sm">Total</th><th class="px-2 py-2 text-right text-xs sm:text-sm">Gap</th><th class="px-2 py-2 text-center text-xs sm:text-sm">%</th></tr></thead><tbody>';
        teams.forEach(t=>{
            const tm=d.teams[t.key],tot=tm.confirmed+tm.unconfirmed,gap=tm.target-tot,pct=(tot/tm.target*100).toFixed(0);
            const badge=pct>=90?'bg-green-100 text-green-800':pct>=75?'bg-yellow-100 text-yellow-800':'bg-red-100 text-red-800';
            html+='<tr class="border-b"><td class="px-2 py-2 text-xs sm:text-sm">' + t.name + '</td><td class="px-2 py-2 text-right text-xs sm:text-sm">' + formatCurrency(tm.target) + '</td><td class="px-2 py-2 text-right text-green-700 text-xs sm:text-sm">' + formatCurrency(tm.confirmed) + '</td><td class="px-2 py-2 text-right text-yellow-700 text-xs sm:text-sm">' + formatCurrency(tm.unconfirmed) + '</td><td class="px-2 py-2 text-right text-xs sm:text-sm">' + formatCurrency(tot) + '</td><td class="px-2 py-2 text-right text-red-600 text-xs sm:text-sm">' + formatCurrency(gap) + '</td><td class="px-2 py-2 text-center"><span class="px-2 py-1 rounded text-xs ' + badge + '">' + pct + '%</span></td></tr>';
        });
        html+='<tr class="bg-blue-50 font-bold"><td class="px-2 py-2 text-xs sm:text-sm">TOTAL</td><td class="px-2 py-2 text-right text-xs sm:text-sm">' + formatCurrency(d.target) + '</td><td class="px-2 py-2 text-right text-green-700 text-xs sm:text-sm">' + formatCurrency(d.confirmed) + '</td><td class="px-2 py-2 text-right text-yellow-700 text-xs sm:text-sm">' + formatCurrency(d.unconfirmed) + '</td><td class="px-2 py-2 text-right text-xs sm:text-sm">' + formatCurrency(d.confirmed+d.unconfirmed) + '</td><td class="px-2 py-2 text-right text-red-700 text-xs sm:text-sm">' + formatCurrency(d.gap) + '</td><td class="px-2 py-2 text-center"><span class="bg-blue-100 text-blue-800 px-2 py-1 rounded text-xs">' + (((d.confirmed+d.unconfirmed)/d.target)*100).toFixed(0) + '%</span></td></tr></tbody>';
        document.getElementById('teamTable').innerHTML=html;
    }else{document.getElementById('teamBreakdown').style.display='none';}
    
    if(currentOffice==='group'){
        document.getElementById('comparisonTitle').textContent='Office Breakdown - ' + d.month;
        let html='<thead class="bg-gray-100"><tr><th class="px-2 py-2 text-left text-xs sm:text-sm">Office</th><th class="px-2 py-2 text-right text-xs sm:text-sm">Target</th><th class="px-2 py-2 text-right text-xs sm:text-sm">Confirmed</th><th class="px-2 py-2 text-right text-xs sm:text-sm">Unconf.</th><th class="px-2 py-2 text-right text-xs sm:text-sm">Total</th><th class="px-2 py-2 text-right text-xs sm:text-sm">Gap</th><th class="px-2 py-2 text-center text-xs sm:text-sm">%</th><th class="px-2 py-2 text-right text-xs sm:text-sm">% of Group</th></tr></thead><tbody>';
        ['melbourne','brisbane','sydney'].forEach(o=>{
            const od=data[o][currentMonth],pct=((od.confirmed+od.unconfirmed)/od.target*100).toFixed(0),pctG=(od.target/d.target*100).toFixed(1);
            const badge=pct>=90?'bg-green-100 text-green-800':pct>=75?'bg-yellow-100 text-yellow-800':'bg-red-100 text-red-800';
            html+='<tr class="border-b"><td class="px-2 py-2 capitalize text-xs sm:text-sm">' + o + '</td><td class="px-2 py-2 text-right text-xs sm:text-sm">' + formatCurrency(od.target) + '</td><td class="px-2 py-2 text-right text-green-700 text-xs sm:text-sm">' + formatCurrency(od.confirmed) + '</td><td class="px-2 py-2 text-right text-yellow-700 text-xs sm:text-sm">' + formatCurrency(od.unconfirmed) + '</td><td class="px-2 py-2 text-right text-xs sm:text-sm">' + formatCurrency(od.confirmed+od.unconfirmed) + '</td><td class="px-2 py-2 text-right text-red-600 text-xs sm:text-sm">' + formatCurrency(od.gap) + '</td><td class="px-2 py-2 text-center"><span class="px-2 py-1 rounded text-xs ' + badge + '">' + pct + '%</span></td><td class="px-2 py-2 text-right text-xs sm:text-sm">' + pctG + '%</td></tr>';
        });
        html+='<tr class="bg-blue-50 font-bold"><td class="px-2 py-2 text-xs sm:text-sm">GROUP TOTAL</td><td class="px-2 py-2 text-right text-xs sm:text-sm">' + formatCurrency(d.target) + '</td><td class="px-2 py-2 text-right text-green-700 text-xs sm:text-sm">' + formatCurrency(d.confirmed) + '</td><td class="px-2 py-2 text-right text-yellow-700 text-xs sm:text-sm">' + formatCurrency(d.unconfirmed) + '</td><td class="px-2 py-2 text-right text-xs sm:text-sm">' + formatCurrency(d.confirmed+d.unconfirmed) + '</td><td class="px-2 py-2 text-right text-red-700 text-xs sm:text-sm">' + formatCurrency(d.gap) + '</td><td class="px-2 py-2 text-center"><span class="bg-blue-100 text-blue-800 px-2 py-1 rounded text-xs">' + (((d.confirmed+d.unconfirmed)/d.target)*100).toFixed(0) + '%</span></td><td class="px-2 py-2 text-right text-xs sm:text-sm">100%</td></tr></tbody>';
        document.getElementById('comparisonTable').innerHTML=html;
    }
}

window.addEventListener('resize', updateDisplay);
updateDisplay();
    </script>
</body>
</html>